name: SAST

on:
  push:
    branches:
      - dev
  pull_request:
    branches:
      - main
      
  schedule:
    # Daily scan (off-peak)
    - cron: '12 15 * * *'


jobs: 

  snyk:
    name: Snyk Scan
    runs-on: ubuntu-latest

    permissions:
      security-events: write

      # If your repository is private, also add:
      actions: read
      contents: read

    steps:
      - uses: actions/checkout@master
      - name: Run Snyk to check for vulnerabilities
        uses: snyk/actions/node@master
        continue-on-error: true # To make sure that SARIF upload gets called
        env:
          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
        with:
          command: code test

          

  

  semgrep:
      name: Semgrep Scan
      runs-on: ubuntu-latest
      permissions:
        contents: read
      env:
        SEMGREP_APP_TOKEN: ${{ secrets.SEMGREP_APP_TOKEN }}
      container:
        image: semgrep/semgrep
      if: (github.actor != 'dependabot[bot]')
      steps:
        - uses: actions/checkout@v4
        - run: semgrep ci -q



